include(../cmake/RuntimeTargetTemplate.cmake)
add_library(ompvt-print-callback INTERFACE)
target_include_directories(ompvt-print-callback INTERFACE ${CMAKE_CURRENT_SOURCE_DIR}/../ompt)

add_openmp_testsuite(check-libompv "Running libompv tests" ${CMAKE_CURRENT_BINARY_DIR} DEPENDS ompv)
# Add target check-ompt, but make sure to not add the tests twice to check-openmp.
add_openmp_testsuite(check-ompvt "Running OMPVT tests" ${CMAKE_CURRENT_BINARY_DIR} EXCLUDE_FROM_CHECK_ALL DEPENDS ompv)

# Configure the lit.site.cfg.in file
set(AUTO_GEN_COMMENT "## Autogenerated by libompv configuration.\n# Do not edit!")
# Override the detected openmp flag to libompv
set(OPENMP_TEST_OPENMP_FLAGS "${OPENMP_TEST_OPENMP_FLAGS} -fopenmp=libompv")
configure_file(../lit.site.cfg.in lit.site.cfg @ONLY)
